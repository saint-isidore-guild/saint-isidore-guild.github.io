buildscript {
    repositories {
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath 'org.asciidoctor:asciidoctor-java-integration:0.1.4'
        classpath "me.champeau.gradle:jbake-gradle-plugin:0.2"
        classpath 'org.ajoberstar:gradle-git-publish:0.2.1'
    }
}

apply plugin: "me.champeau.jbake"
apply plugin: 'org.ajoberstar.git-publish'

gitPublish {
    repoUri = 'git@github.com:saint-isidore-guild/saint-isidore-guild.github.io.git'
    branch = 'master'
    contents {
        from ('output'){
            into '.'
        }
    }
}

jbake {
    input = file 'src/jbake'
    output = file 'output'
    clearCache = true
}

task publish(type: GradleBuild) {
    tasks = ['jbake','gitPublishPush']
}
